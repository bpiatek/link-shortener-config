monitoring:
  user:
    name: bpiatek
    password: dupa1234

spring:
  threads:
    virtual:
      enabled: true
  boot:
    admin:
      client:
        username: ${monitoring.user.name}
        password: ${monitoring.user.password}
        instance:
          service-url: http://link-shortener-api-gateway-dev-helm:80
          metadata:
            user.name: ${monitoring.user.name}
            user.password: ${monitoring.user.password}
  cloud:
    gateway:
      server:
        webmvc:
          routes:
            - id: kafka_producer_route
              uri: lb://kafka-producer-dev-helm
              predicates:
                - Path=/producer/**
              filters:
                - StripPrefix=1

            - id: kafka_consumer_route
              uri: lb://kafka-consumer-dev-helm
              predicates:
                - Path=/consumer/**
              filters:
                - StripPrefix=1

            - id: user_service_route
              uri: lb://link-shortener-user-service-dev-helm
              predicates:
                - Path=/user/**
              filters:
                - StripPrefix=1
  security:
    oauth2:
      resourceserver:
        jwt:
          jwk-set-uri: "http://link-shortener-user-service-dev-helm.dev.svc.cluster.local:8080/.well-known/jwks.json"
server:
  undertow:
    worker-threads: 0   # 0 = use virtual threads
    io-threads: 2       # can adjust if needed
    buffers-per-region: 1024
    
management:
  endpoints:
    web:
      exposure:
        include: "*"
  endpoint:
    health:
      show-details: ALWAYS
    env:
      show-values: ALWAYS